!function(e){function t(t){for(var o,s,a=t[0],l=t[1],c=t[2],p=0,h=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(d&&d(t);h.length;)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var l=n[a];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={0:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;r.push([28,1]),n()}({15:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);n(14),n(15);var o=n(2),i=n(0),r=n.p+"nodes.json",a=n.p+"links.json",l=n.p+"arial.xml",c=n.p+"arial.png",d=n(10),p=n.n(d),h=n(11),u=n(12),m=n.n(u);var f=()=>{const e=new i.Graphics;e.interactiveChildren=!1;const t=s.pixi.addChild(e);t.alpha=.2,s.links.forEach(({source:e,target:n,value:o})=>{t.lineStyle(o,4473924),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y)})};const w="—————————————",g='<span class="block"></span>';var y=n(13);let b,x,v;document.getElementsByTagName("body")[0];const C={gridSize:10,weightFactor:.2,fontFamily:"Arial, sans-serif",color:"#666",backgroundColor:"transparent",rotateRatio:0};const k=16777215,S=7829367;var E=()=>{const e=new i.Graphics,t=(s.pixi.addChild(e),new i.TextStyle({font:"2px Arial",fill:k,align:"center"}));s.nodes.forEach(n=>{n.visibility=!1;const r=.1*n.docs;n.circle=new i.Graphics,n.circle.beginFill(16777215,1),n.circle.drawCircle(0,0,r),n.circle.endFill(),n.circle.tint=S,n.circle.position=new i.Point(n.x,n.y),n.circle.interactive=!0,n.circle.hitArea=new i.Circle(0,0,s.distance),e.addChild(n.circle);const[a,l]=(e=>{const t=Math.round(e.length/2);for(let n=t,o=t;n<e.length||o>=0;n++,o--){if(" "===e[n])return[e.substring(0,n),e.substring(n+1)];if(" "===e[o])return[e.substring(0,o),e.substring(o+1)]}return[e,""]})(n.name);n.text=new i.BitmapText(`${a}\n${l}`,t),n.text.tint=S,n.text.position.set(n.x-n.text.width/2,n.y+r+3),e.addChild(n.text),n.circle.mouseover=e=>{!function(e){const t=o.select("body").append("div").attr("id","focus");t.append("h2").html(e.name),t.append("h3").html(`${e.docs} Publications`),s.tokens=e.tokens.slice(0,3).map(e=>e.term),t.append("p").html("&nbsp;"),t.append("h3").html("Tokens by tf-idf"),t.append("p").html(w),e.tokens.slice(0,10).forEach(e=>{const n=g.repeat(e.tfidf/10);t.append("p").html(`${n} &nbsp; ${e.term}`)}),t.append("p").html("&nbsp;"),t.append("h3").html("Co-author Nationalities"),t.append("p").html(w),Object.entries(e.nationalities).sort().forEach(([e,n],o)=>{const i=g.repeat(4*n);t.append("p").html(`${i} &nbsp; ${e}`)}),t.append("p").html("&nbsp;"),t.append("h3").html("Publication Years"),t.append("p").html(w),Object.entries(e.years).forEach(([e,n],o)=>{const i=g.repeat(4*n);t.append("p").html(`${i} &nbsp; ${e}`)})}(n),s.nodes.filter(e=>n.peers.includes(e.id)).forEach(e=>{e.circle.tint=k,e.text.tint=k})},n.circle.mouseout=e=>{o.select("#focus").remove(),s.tokens=[],s.nodes.forEach(e=>{e.circle.tint=S,e.text.tint=S})}})};window.d3=o,window.s={distance:30,links:f,nodes:E,tokens:[]},Promise.all([o.json(r),o.json(a),o.xml(l)]).then(([e,t,n])=>{s.links=t,s.nodes=e,console.log("nodes",s.nodes.length),console.log("links",s.links.length),(()=>{const e=new i.Application({width:window.innerWidth,height:window.innerHeight,antialias:!0,transparent:!0,resolution:2,autoDensity:!0,autoResize:!0,resizeTo:window});document.body.prepend(e.view),s.app=e;const t=new h.a({screenWidth:window.innerWidth,screenHeight:window.innerHeight,interaction:e.renderer.plugins.interaction});e.stage.addChild(t),s.pixi=t;t.drag().pinch().wheel().decelerate().clampZoom({minScale:.1,maxScale:5}).setTransform(window.innerWidth/2,window.innerHeight/2,.5,.5),window.addEventListener("wheel",e=>{e.preventDefault()},{passive:!1})})();const o=i.Texture.from(c);i.BitmapText.registerFont(n,o);(()=>{const e=m()({every:1});setInterval(()=>{e.tick()},1e3/60);const t=document.getElementById("fps");e.on("data",(function(e){t.innerHTML=Math.floor(parseInt(e))}))})(),(()=>{const e=window.innerWidth>window.innerHeight?window.innerWidth:window.innerHeight,t=document.createElement("canvas"),n=t.getContext("2d");t.width=e,t.height=e;const o=n.createRadialGradient(e/2,e/2,0,e/2,e/2,e/2);o.addColorStop(1,d3.rgb(0,0,0)),o.addColorStop(0,d3.rgb(50,50,50)),n.fillStyle=o,n.fillRect(0,0,t.width,t.height);let r=i.Texture.from(t),a=new i.Sprite(r);a.width=e,a.height=e,a.position=new i.Point(-e/2,-e/2);s.pixi.addChild(a)})(),f(),(()=>{const e=new i.Graphics;e.interactiveChildren=!1;const t=s.pixi.addChild(e),n=d3.extent(s.nodes,e=>e.x),o=d3.extent(s.nodes,e=>e.y),r=n[1]-n[0],a=o[1]-o[0],l=n[0],c=o[0],d=d3.contourDensity().x(e=>e.x-l).y(e=>e.y-c).weight(e=>e.relevancy).size([r,a]).cellSize(5).bandwidth(25).thresholds(30)(s.nodes);d.forEach(e=>e.coordinates=e.coordinates.map(e=>e.map(e=>e.map(e=>[e[0]+l,e[1]+c]))));const p=1/d.length;let h=1;for(let e=d.length-1;e>=0;e--){const n=1-p*h;t.lineStyle(n,6378267),h+=1,d[e].coordinates.forEach(e=>{e.forEach(e=>{e.forEach(([e,n],o)=>{0==o&&t.moveTo(e,n),t.lineTo(e,n)})}),t.closePath()})}})(),(()=>{const e=new i.Graphics;e.interactiveChildren=!1,b=s.pixi.addChild(e);x=Math.pow(2*s.distance-2,2),v=Math.pow(2*s.distance+2,2),s.links.forEach(t=>{const n=Math.abs(t.source.x-t.target.x),o=Math.abs(t.source.y-t.target.y),r=Math.pow(n,2)+Math.pow(o,2);t.txt;if(x<r&&r<v){const r=document.createElement("canvas");r.getContext("2d");r.width=100,r.height=100;let s=Object.entries(t.tokens);C.list=s,y(r,C),r.addEventListener("wordcloudstop",r=>{const s=n/2+Math.min(t.source.x,t.target.x),a=o/2+Math.min(t.source.y,t.target.y),l=r.path[0];let c=i.Texture.from(l),d=new i.Sprite(c);d.width=20,d.height=20,d.position=new i.Point(s-10,a-10),t.tokens=d,e.addChild(t.tokens)})}})})(),E(),(()=>{document.querySelector("#autoComplete").addEventListener("autoComplete",e=>{console.log(e)});new p.a({data:{src:async()=>s.nodes,key:["name"],cache:!1},sort:(e,t)=>e.match<t.match?-1:e.match>t.match?1:0,placeHolder:"Search",selector:"#autoComplete",threshold:0,debounce:0,searchEngine:"loose",highlight:!0,maxResults:10,resultsList:{render:!0,container:e=>{e.setAttribute("id","autoComplete_list")},destination:document.querySelector("#autoComplete"),position:"afterend",element:"ul"},resultItem:{content:(e,t)=>{t.innerHTML=e.match},element:"li"},noResults:()=>{const e=document.createElement("li");e.setAttribute("class","no_result"),e.setAttribute("tabindex","1"),e.innerHTML="No Results",document.querySelector("#autoComplete_list").appendChild(e)},onSelection:e=>{console.log(e);e.selection.key;const t=e.selection.value,{x:n,y:o,name:i}=t;document.querySelector("#autoComplete").value=i;s.pixi.setTransform(window.innerWidth/2-5*n,window.innerHeight/2-5*o,5,5)}})})(),window.onresize=function(){s.pixi.resize()}})}});