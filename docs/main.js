!function(e){function t(t){for(var o,s,a=t[0],d=t[1],c=t[2],h=0,p=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(e[o]=d[o]);for(l&&l(t);p.length;)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var d=n[a];0!==i[d]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={0:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],d=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=d;r.push([27,1]),n()}({14:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);n(14);var o=n(1);let i={distance:30,densityData:[],zoomState:null,zoomExtent:[1,8],screen:{},ext:{},array:{},colors:{gradientA:o.rgb(0,0,0),gradientB:o.rgb(60,60,60),contours:o.rgb(255,255,255,.5),tokens:o.rgb(255,255,255,.5),nodes:o.rgb(255,255,255,.5)},tokens:{}};var r=n.p+"nodes.json",a=n.p+"links.json",d=(n(28),n(0));let c,l;const h='<tr><th colspan="2"><hr></th></tr>',p='<span class="block"></span>';let u,y;function f(){const e=new d.Graphics;u=i.pixi.addChild(e);new d.TextStyle({fontFamily:"Arial",fontSize:6,fill:"white"});i.nodes.forEach(t=>{t.gpx=new d.Graphics,t.gpx.beginFill(16777215),t.gpx.drawCircle(0,0,1),t.gpx.endFill(),e.addChild(t.gpx),t.gpx.interactive=!0,t.gpx.hitArea=new d.Circle(0,0,20),t.gpx.mouseover=e=>{!function(e){console.log(e);const t=document.createElement("div");t.id="focus",document.querySelector("body").append(t);const n=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div");n.className="left",o.className="middle",i.className="right";let r="<table>";r+='<tr><td style="width:80px"></td><td style="width:80px"></td></tr>',r+=`<tr><td colspan="2" style="text-align:center;"><h1>${e.name}</h1></td></tr>`,r+=`<tr><td colspan="2" style="text-align:center;">${e.docs} publications</td></tr>`,r+='<tr style="height:10px"><td></td><td></td></tr>',r+='<tr><td colspan="2" style="text-align:center;">Tokens by tf-idf</td></tr>',r+=h,r+=Object.entries(e.tokens).reduce((e,t,n)=>{if(n<20){const n=t[1]/10,o=p.repeat(n);e+=`<tr><td style="text-align: right;">${t[0]}</td><td>${o}</td></tr>`}return e},[]),r+="</table>";let a="<table>";a+='<tr><td style="text-align:center;">List of co-authors</td></tr>',a+=h,e.peers.forEach(e=>{const t=s.nodes.find(t=>t.id==e);void 0!==t&&(a+=`<tr><td>${t.name}</td></tr>`)}),a+="</table>";let d="<table>";d+='<tr><td style="width:20px"></td><td style="width:50px"></td></tr>',d+='<tr><td colspan="2" style="text-align:center;">Publications by year</td></tr>',d+=h;for(let t=s.ext.years.min;t<=s.ext.years.max;t++){const n=void 0===e.years[t]?0:2*e.years[t];d+=`<tr><td style="text-align: right;">${t}</td><td>${p.repeat(n)}</td></tr>`}d+="</table>",n.insertAdjacentHTML("beforeend",d),o.insertAdjacentHTML("beforeend",a),i.insertAdjacentHTML("beforeend",r),t.append(n),t.append(o),t.append(i)}(t)},t.gpx.mouseout=e=>{document.querySelector("#focus").remove()}})}function g(){!function(){c.clear(),c.alpha=.8,i.densityData=d3.contourDensity().x(e=>e.x).y(e=>e.y).weight(e=>e.relevancy).size([i.body.clientWidth,i.body.clientHeight]).cellSize(5).bandwidth(40).thresholds(15)(i.nodes);const e=.8/i.densityData.length;let t=1;for(let n=i.densityData.length-1;n>=0;n--){const o=.8-e*t;c.lineStyle(o,16777215),t+=1,i.densityData[n].coordinates.forEach(e=>{e.forEach(e=>{e.forEach(([e,t],n)=>{0==n&&c.moveTo(e,t),c.lineTo(e,t)})}),c.closePath()})}}(),l.clear(),l.alpha=.2,i.links.forEach(({source:e,target:t,value:n})=>{l.lineStyle(n,16777215),l.moveTo(e.x,e.y),l.lineTo(t.x,t.y)}),u.clear(),u.alpha=.8,i.nodes.forEach(e=>{const{x:t,y:n,gpx:o,txt:i}=e;o.position=new d.Point(t,n)}),i.links.forEach(e=>{if(!e.txt)return;const t=Math.abs(e.source.x-e.target.x),n=Math.abs(e.source.y-e.target.y),o=Math.pow(t,2)+Math.pow(n,2),r=e.txt;if(i.ext.distance.min<o&&o<i.ext.distance.max){const o=t/2+(e.source.x<e.target.x?e.source.x:e.target.x),i=n/2+(e.source.y<e.target.y?e.source.y:e.target.y);console.log(),r.position.set(o-r.width/2,i-r.height/2)}else r.position.set(-100,-100)})}var x=n(12),w=n(13),b=n.n(w);window.d3=o,window.s=i,Promise.all([o.json(r),o.json(a)]).then(([e,t])=>{i.links=t,i.nodes=e,console.log("nodes",i.nodes.length),console.log("links",i.links.length),s.ext.years={min:s.nodes.reduce((e,t)=>(Object.keys(t.years).forEach(t=>{t<e&&(e=t)}),e),1/0),max:s.nodes.reduce((e,t)=>(Object.keys(t.years).forEach(t=>{t>e&&(e=t)}),e),0)},"devicePixelRatio"in window&&window.devicePixelRatio>1?s.screen.density=window.devicePixelRatio:s.screen.density=1,console.log("screen density:",s.screen.density),s.body=document.querySelector("body"),window.addEventListener("wheel",e=>{e.preventDefault()},{passive:!1}),(()=>{const e=new d.Application({width:i.body.clientWidth,height:i.body.clientHeight,antialias:!0,transparent:!0,resolution:2,autoDensity:!0,autoResize:!0});document.body.prepend(e.view),i.pixi=e.stage;const t=new x.a({screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:1e3,worldHeight:1e3,interaction:e.renderer.plugins.interaction});e.stage.addChild(t),i.pixi=t,t.drag().pinch().wheel().decelerate()})(),(()=>{const e=b()({every:1});setInterval(()=>{e.tick()},1e3/60);const t=document.getElementById("fps");e.on("data",(function(e){t.innerHTML=Math.floor(parseInt(e))}))})(),function(){const e=new d.Graphics;c=i.pixi.addChild(e)}(),function(){const e=new d.Graphics;l=i.pixi.addChild(e)}(),f(),function(){const e=new d.Graphics;y=i.pixi.addChild(e),i.ext.distance={min:Math.pow(i.distance*i.screen.density/2,2),max:Math.pow(i.distance*i.screen.density,2)};const t=new d.TextStyle({fontFamily:"Arial",fontSize:24,fill:"white",align:"center"});i.links.forEach(e=>{if(e.value<.1)return;const[n,o]=Object.entries(e.tokens)[0],i=5e-4*o;e.txt=new d.Text(n,t),e.txt.scale.set(i),y.addChild(e.txt)})}(),(()=>{const e=document.createElement("canvas");e.id="background",e.width=window.innerWidth,e.height=window.innerHeight,document.querySelector("body").prepend(e);const t=document.querySelector("#background").getContext("2d",{alpha:!1}),n=t.createRadialGradient(e.width/2,e.width/2,0,e.width/2,e.height/2,e.width/2);n.addColorStop(1,s.colors.gradientA),n.addColorStop(0,s.colors.gradientB),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)})(),o.forceSimulation().force("collide",o.forceCollide().radius(i.distance).strength(.5).iterations(20)).force("center",o.forceCenter(i.body.clientWidth/2,i.body.clientHeight/2)).force("link",o.forceLink().id(e=>e.id).strength(e=>1*e.value)).nodes(i.nodes).on("tick",g).force("link").links(i.links)})}});