!function(e){function t(t){for(var i,s,a=t[0],l=t[1],c=t[2],p=0,h=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&h.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(d&&d(t);h.length;)h.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={0:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;r.push([27,1]),n()}({14:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);n(14);var i=n(2),o=n.p+"nodes.json",r=n.p+"links.json",a=(n(28),n(0));let l,c;const d="—————————————",p='<span class="block"></span>';let h;function u(){const e=new a.Graphics;h=s.pixi.addChild(e);const t=new a.TextStyle({fontFamily:"Arial",fontSize:5,fill:"white",align:"center"});s.nodes.forEach(n=>{n.mouseover={ethnicity:!1,peers:!1},n.gpxCentral=new a.Graphics,n.gpxCentral.beginFill(16777215),n.gpxCentral.drawCircle(0,0,1),n.gpxCentral.endFill(),e.addChild(n.gpxCentral),n.gpxEthnicity=new a.Graphics,n.gpxEthnicity.lineStyle(.5,16777215),n.gpxEthnicity.drawCircle(0,0,3),n.gpxEthnicity.endFill(),e.addChild(n.gpxEthnicity),n.gpxPeer=new a.Graphics,n.gpxPeer.lineStyle(.5,16777215),n.gpxPeer.drawCircle(0,0,5),n.gpxPeer.endFill(),e.addChild(n.gpxPeer);const[o,r]=(e=>{const t=Math.round(e.length/2);for(let n=t,i=t;n<e.length||i>=0;n++,i--){if(" "===e[n])return[e.substring(0,n),e.substring(n+1)];if(" "===e[i])return[e.substring(0,i),e.substring(i+1)]}return[e,""]})(n.name);n.gpxText=new a.Text(`${o}\n${r}`,t),n.gpxText.scale.x=.5,n.gpxText.scale.y=.5,e.addChild(n.gpxText),n.gpxCentral.interactive=!0,n.gpxCentral.hitArea=new a.Circle(0,0,20),n.gpxCentral.mouseover=e=>{!function(e){const t=i.select("body").append("div").attr("id","focus");t.append("h2").html(e.name),t.append("h3").html(`${e.docs} Publications`),t.append("h3").html(`Ethnicity: ${e.ethnicity}`),t.append("p").html("&nbsp;"),t.append("h3").html("Tokens by tf-idf"),t.append("p").html(d),Object.entries(e.tokens).forEach(([e,n],i)=>{if(i<10){const i=p.repeat(n/10);t.append("p").html(`${i} &nbsp; ${e}`)}}),t.append("p").html("&nbsp;"),t.append("h3").html("Co-author Ethnicity"),t.append("p").html(d),Object.entries(e.ethnicities).sort().forEach(([e,n],i)=>{const o=p.repeat(4*n);t.append("p").html(`${o} &nbsp; ${e}`)}),t.append("p").html("&nbsp;"),t.append("h3").html("Publication Years"),t.append("p").html(d),Object.entries(e.years).forEach(([e,n],i)=>{const o=p.repeat(4*n);t.append("p").html(`${o} &nbsp; ${e}`)})}(n),s.nodes.filter(e=>n.peers.includes(e.id)).forEach(e=>e.mouseover.peers=!0),s.nodes.filter(e=>e.ethnicity==n.ethnicity).forEach(e=>e.mouseover.ethnicity=!0),g()},n.gpxCentral.mouseout=e=>{i.select("#focus").remove(),s.nodes.forEach(e=>e.mouseover.peers=!1),s.nodes.forEach(e=>e.mouseover.ethnicity=!1)}})}const f=new a.Point(1/0,1/0);function g(){h.clear(),s.nodes.forEach(e=>{const{x:t,y:n,gpxCentral:i,gpxEthnicity:o,gpxPeer:r,gpxText:s}=e,l=new a.Point(t,n);i.position=l,o.position=e.mouseover.ethnicity?l:f,r.position=e.mouseover.peers?l:f,s.position.set(t-s.width/2,n+3)})}let w,x,y;function m(){!function(){l.clear(),l.alpha=.8;const e=d3.contourDensity().x(e=>e.x).y(e=>e.y).weight(e=>e.relevancy).size([window.innerWidth,window.innerHeight]).cellSize(5).bandwidth(40).thresholds(15)(s.nodes),t=.8/e.length;let n=1;for(let i=e.length-1;i>=0;i--){const o=.8-t*n;l.lineStyle(o,16777215),n+=1,e[i].coordinates.forEach(e=>{e.forEach(e=>{e.forEach(([e,t],n)=>{0==n&&l.moveTo(e,t),l.lineTo(e,t)})}),l.closePath()})}}(),g(),s.links.forEach(e=>{if(!e.txt)return;const t=Math.abs(e.source.x-e.target.x),n=Math.abs(e.source.y-e.target.y),i=Math.pow(t,2)+Math.pow(n,2),o=e.txt;if(x<i&&i<y){const i=t/2+Math.min(e.source.x,e.target.x),r=n/2+Math.min(e.source.y,e.target.y);o.position.set(i-o.width/2,r-o.height/2)}else o.position.set(1/0,1/0)})}var b=n(12),v=n(13),C=n.n(v);window.d3=i,window.s={distance:30,links:r,nodes:o},Promise.all([i.json(o),i.json(r)]).then(([e,t])=>{s.links=t,s.nodes=e,console.log("nodes",s.nodes.length),console.log("links",s.links.length),(()=>{const e=new a.Application({width:window.innerWidth,height:window.innerHeight,antialias:!0,transparent:!0,resolution:2,autoDensity:!0,autoResize:!0});document.body.prepend(e.view),s.pixi=e.stage;const t=new b.a({screenWidth:window.innerWidth,screenHeight:window.innerHeight,interaction:e.renderer.plugins.interaction});e.stage.addChild(t),s.pixi=t,t.drag().pinch().wheel().decelerate().clampZoom({minScale:.5,maxScale:3}),window.addEventListener("wheel",e=>{e.preventDefault()},{passive:!1})})(),(()=>{const e=C()({every:1});setInterval(()=>{e.tick()},1e3/60);const t=document.getElementById("fps");e.on("data",(function(e){t.innerHTML=Math.floor(parseInt(e))}))})(),function(){const e=new a.Graphics;l=s.pixi.addChild(e)}(),function(){const e=new a.Graphics;c=s.pixi.addChild(e)}(),u(),function(){const e=new a.Graphics;w=s.pixi.addChild(e),x=Math.pow(2*s.distance-2,2),y=Math.pow(2*s.distance+2,2);const t=new a.TextStyle({fontFamily:"Arial",fontSize:24,fill:"white",align:"center"});s.links.forEach(e=>{if(e.value<.1)return;const[n,i]=Object.entries(e.tokens)[0],o=7e-4*i;e.txt=new a.Text(n,t),e.txt.scale.set(o),w.addChild(e.txt)})}(),(()=>{const e=document.createElement("canvas");e.id="background",e.width=window.innerWidth,e.height=window.innerHeight,document.querySelector("body").prepend(e);const t=e.getContext("2d",{alpha:!1}),n=t.createRadialGradient(e.width/2,e.width/2,0,e.width/2,e.height/2,e.width/2);n.addColorStop(1,d3.rgb(0,0,0)),n.addColorStop(0,d3.rgb(60,60,60)),t.fillStyle=n,t.fillRect(0,0,e.width,e.height)})(),d3.forceSimulation().force("collide",d3.forceCollide().radius(s.distance).strength(.5).iterations(20)).force("center",d3.forceCenter(window.innerWidth/2,window.innerHeight/2)).force("link",d3.forceLink().id(e=>e.id).strength(e=>1*e.value)).nodes(s.nodes).on("tick",m).force("link").links(s.links)})}});