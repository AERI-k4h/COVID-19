(()=>{"use strict";var e={908:(e,t,n)=>{var i=n(244),o=n(119),r=n(354);const a=n.p+"nodes.json",l=n.p+"links.json",c=n.p+"triplets.json",d=n.p+"arial.xml";var p=n(194),h=n.n(p),m=n(475);const u=n.p+"arial.png";var f=n(476),w=n(865),x=n(129),g=n.n(x),y=n(586);let v,b,C;i.BitmapFont.from("KeywordFont",{fontFamily:"Arial",fontSize:72,fill:13095362});const S=()=>{const e=new i.Graphics;e.interactiveChildren=!1,e.alpha=.05,s.pixi.addChild(e),s.links.forEach((({source:t,target:n,value:i})=>{e.lineStyle(i,16777215),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y)}))};var k=n(582);const E="&nbsp;",T="—————————————",F='<span class="block"></span>',M=16702720,P=13095362;i.BitmapFont.from("NodeFont",{fontFamily:"Arial",fontSize:21,fill:P});const Z=()=>{const e=new i.Graphics;s.pixi.addChild(e),s.nodes.forEach((t=>{const n=.1*t.docs;t.circle=new i.Graphics,t.circle.beginFill(P,1),t.circle.drawCircle(0,0,n),t.circle.endFill(),t.circle.tint=P,t.circle.position=new i.Point(t.x,t.y),t.circle.hitArea=new i.Circle(0,0,s.distance),t.circle.interactive=!0,e.addChild(t.circle);const[o,r]=(e=>{const t=Math.round(e.length/2);for(let n=t,i=t;n<e.length||i>=0;n++,i--){if(" "===e[n])return[e.substring(0,n),e.substring(n+1)];if(" "===e[i])return[e.substring(0,i),e.substring(i+1)]}return[e,""]})(t.name);t.text=new i.BitmapText(`${o}\n${r}`,{fontName:"NodeFont"}),t.text.scale.set(.2),t.text.align="center",t.text.position.set(t.x-t.text.width/2,t.y+n+2),e.addChild(t.text),t.circle.mouseover=e=>{!function(e){const t=(0,k.Z)("body").append("div").attr("id","focus");t.append("h2").html(e.name),t.append("h3").html(e.docs+" Publications"),t.append("p").html(E),t.append("h3").html("Tokens by tf-idf"),t.append("p").html(T),Object.entries(e.tokens).slice(0,20).forEach((([e,n])=>{const i=F.repeat(n/10);t.append("p").html(`${i} &nbsp; ${e}`)})),t.append("p").html(E),t.append("h3").html("Co-author Nationalities"),t.append("p").html(T),Object.entries(e.nationalities).sort().forEach((([e,n],i)=>{const o=F.repeat(4*n);t.append("p").html(`${o} &nbsp; ${e}`)})),t.append("p").html(E),t.append("h3").html("Publication Years"),t.append("p").html(T),Object.entries(e.years).forEach((([e,n],i)=>{const o=F.repeat(4*n);t.append("p").html(`${o} &nbsp; ${e}`)}))}(t),s.nodes.filter((e=>t.peers.includes(e.id))).forEach((e=>{e.circle.tint=M,e.text.tint=M}))},t.circle.mouseout=e=>{(0,k.Z)("#focus").remove(),s.tokens=[],s.nodes.forEach((e=>{e.circle.tint=P,e.text.tint=P}))}}))};i.BitmapFont.from("TripletFont",{fontFamily:"Arial",fontSize:24,fill:6516064}),window.s={distance:30,links:S,nodes:Z,tokens:[]},Promise.all([(0,o.Z)(a),(0,o.Z)(l),(0,o.Z)(c),(0,r.ZP)(d)]).then((([e,t,n,o])=>{s.links=t,s.nodes=e,s.triplets=n,console.log("nodes",s.nodes.length),console.log("links",s.links.length),console.log("triplets",s.triplets.length),(e=>{const t=new i.Application({width:window.innerWidth,height:window.innerHeight,antialias:!0,transparent:!0,resolution:2,autoDensity:!0,autoResize:!0,resizeTo:window});document.body.prepend(t.view);const n=i.Texture.from(u);i.BitmapFont.install(e,n),s.pixi=new m.l({screenWidth:window.innerWidth,screenHeight:window.innerHeight,interaction:t.renderer.plugins.interaction}),t.stage.addChild(s.pixi);const o=(0,w.Z)(s.nodes,(e=>e.x)),r=(0,w.Z)(s.nodes,(e=>e.y)),a=o[1]-o[0],l=r[1]-r[0],c=window.innerWidth/a,d=window.innerHeight/l,p=c<d?c:d,h=p;s.pixi.drag().pinch().wheel().decelerate().clampZoom({minScale:h,maxScale:3}).setTransform(window.innerWidth/2,window.innerHeight/2,p,p);const x=(0,f.Z)().domain([h,2]).range([1,0]),g=(0,f.Z)().domain([h,2]).range([0,1]);s.pixi.on("zoomed",(e=>{const t=e.viewport.lastViewport.scaleX;e.viewport.children[2].alpha=x(t),e.viewport.children[3].alpha=x(t),e.viewport.children[5].alpha=g(t)})),window.addEventListener("wheel",(e=>{e.preventDefault()}),{passive:!1})})(o),(()=>{const e=5e3,t=document.createElement("canvas"),n=t.getContext("2d");t.width=e,t.height=e;const o=n.createRadialGradient(2500,2500,0,2500,2500,2500);o.addColorStop(1,"#000000"),o.addColorStop(0,"#333333"),n.fillStyle=o,n.fillRect(0,0,t.width,t.height);let r=i.Texture.from(t),a=new i.Sprite(r);a.width=e,a.height=e,a.position=new i.Point(-2500,-2500),a.interactiveChildren=!1,s.pixi.addChild(a)})(),S(),(()=>{const e=new i.Graphics;s.pixi.addChild(e),e.interactiveChildren=!1;const t=(0,w.Z)(s.nodes,(e=>e.x)),n=(0,w.Z)(s.nodes,(e=>e.y)),o=t[1]-t[0],r=n[1]-n[0],a=t[0],l=n[0],c=(0,y.Z)().x((e=>e.x-a)).y((e=>e.y-l)).weight((e=>e.relevancy)).size([o,r]).cellSize(15).bandwidth(100).thresholds(30)(s.nodes);c.forEach((e=>e.coordinates=e.coordinates.map((e=>e.map((e=>e.map((e=>[e[0]+a,e[1]+l]))))))));const d=3/c.length;let p=1;for(let t=c.length-1;t>=0;t--){const n=3-d*p;e.lineStyle(n,10066329),p+=1,c[t].coordinates.forEach((t=>{t.forEach((t=>{t.forEach((([t,n],i)=>{0==i&&e.moveTo(t,n),e.lineTo(t,n)}))})),e.closePath()}))}})(),(()=>{const e=new i.Graphics;e.interactiveChildren=!1,v=s.pixi.addChild(e),b=Math.pow(2*s.distance-2,2),C=Math.pow(2*s.distance+2,2),s.links.forEach((e=>{const t=Math.abs(e.source.x-e.target.x),n=Math.abs(e.source.y-e.target.y),o=Math.pow(t,2)+Math.pow(n,2);if(b<o&&o<C){const[o,r]=Object.entries(e.tokens)[0],a=.003*r,l=t/2+Math.min(e.source.x,e.target.x),c=n/2+Math.min(e.source.y,e.target.y);e.txt=new i.BitmapText(o,{fontName:"KeywordFont"}),e.txt.scale.set(a),e.txt.position.set(l-e.txt.width/2,c-e.txt.height/2);let d=!1;s.links.filter((t=>t.txt&&t.index!=e.index)).forEach((t=>{const n=e.txt,i=t.txt;i.x>n.x+n.width||i.x+i.width<n.x||i.y>n.y+n.height||i.y+i.height<n.y||(d=!0)})),d||v.addChild(e.txt)}}))})(),Z(),(()=>{const e=new i.Graphics;e.alpha=0,e.interactiveChildren=!1,s.pixi.addChild(e),s.triplets.forEach((t=>{const n=t.tokens.slice(0,3),o=5*n.length/2,s=t.position[0],r=t.position[1];n.forEach((([t,n],a)=>{const l=new i.BitmapText(t,{fontName:"TripletFont"});l.align="center",l.scale.set(.16),l.position.set(s-l.width/2,r-o+5*a),e.addChild(l)}))}))})(),(()=>{const e=g()({every:1});setInterval((()=>{e.tick()}),1e3/60);const t=document.getElementById("fps");e.on("data",(function(e){t.innerHTML=Math.floor(parseInt(e))}))})(),new(h())({data:{src:async()=>s.nodes.reduce(((e,{name:t,x:n,y:i})=>(e.push({name:t,x:n,y:i}),e)),[]),key:["name"],cache:!1},sort:(e,t)=>e.match<t.match?-1:e.match>t.match?1:0,placeHolder:"Search",selector:"#autoComplete",threshold:0,debounce:0,searchEngine:"loose",highlight:!0,maxResults:10,resultsList:{render:!0,container:e=>{e.setAttribute("id","autoComplete_list")},destination:document.querySelector("#autoComplete"),position:"afterend",element:"ul"},resultItem:{content:(e,t)=>{t.innerHTML=e.match},element:"li"},noResults:()=>{const e=document.createElement("li");e.setAttribute("class","no_result"),e.setAttribute("tabindex","1"),e.innerHTML="No Results",document.querySelector("#autoComplete_list").appendChild(e)},onSelection:e=>{console.log(e),e.selection.key;const t=e.selection.value,{x:n,y:o,name:r}=t;document.querySelector("#autoComplete").value=r;const a=s.pixi.center.x,l=s.pixi.center.y;s.pixi.scale.x<1?s.pixi.animate({scale:5,position:new i.Point(n,o),time:2e3,ease:"easeInOutSine"}):s.pixi.animate({scale:.3,position:new i.Point((n+a)/2,(o+l)/2),time:2e3,ease:"easeInOutSine",callbackOnComplete:()=>{s.pixi.animate({scale:5,position:new i.Point(n,o),time:2e3,ease:"easeInOutSine"})}})}}),window.onresize=function(){s.pixi.resize()}}))}},t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={179:0},t=[[908,785]],i=()=>{};function o(){for(var i,o=0;o<t.length;o++){for(var s=t[o],r=!0,a=1;a<s.length;a++){var l=s[a];0!==e[l]&&(r=!1)}r&&(t.splice(o--,1),i=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),i}n.x=()=>{n.x=()=>{},r=r.slice();for(var e=0;e<r.length;e++)s(r[e]);return(i=o)()};var s=o=>{for(var s,r,[l,c,d,p]=o,h=0,m=[];h<l.length;h++)r=l[h],n.o(e,r)&&e[r]&&m.push(e[r][0]),e[r]=0;for(s in c)n.o(c,s)&&(n.m[s]=c[s]);for(d&&d(n),a(o);m.length;)m.shift()();return p&&t.push.apply(t,p),i()},r=self.webpackChunkcartography_of_covid_19=self.webpackChunkcartography_of_covid_19||[],a=r.push.bind(r);r.push=s})(),n.x()})();